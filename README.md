## <center>航空机票订票系统设计</center>

---

> 本项目为中南大学2022年高级程序设计课程要求的四个项目中的第一项，被归于“单链表、队列、二叉树查找和排序算法的实践”中

#### *要求*

1. 设计每条航线所涉及的信息，包括航班信息：**起点终点站名**、**航班号**、**飞机号**、**飞机周日（星期几）**、**乘员定额**、**票价**、**余票量**等，所有客户订票信息：包括**姓名**、**订票量**、**航班号**，**舱位等级1，2或3等**；所有客户退票信息：包括**姓名**、**退票量**、**航班号**，**舱位等级1，2或3等**；
2. 结合基本操作的**单链表、队列、二叉树等数据结构以及排序算法**，设计实现机票订票系统的**查询、订票、退票、改签**等功能；
3. 设计并实现*人机交互友好的界面或菜单*。

---

根据要求设定以下数据结构：链表，队列，栈，二叉树。队列和栈均为链表的派生，同时为链表准备了可自定义的排序函数，方便排序。

<mark>此处采用template模板，方便存储不同数据类型的数据，使之成为适用性更强的数据结构</mark>
但需要注意到本程序几乎只使用了其中**Linklist**的部分，故其他部分能否在程序中正常运行存疑。

在设计存储信息的时候，考虑到只需存储航班信息和乘客信息，而航班与乘客又具有一定的联系，由于不能使用外部数据库，此处考虑将航班信息存储在乘客成员中（每个乘客成员不是可简单地理解成乘客本人，而其实质是含有乘客和航班信息的一次航行记录）

在整个信息存储中，我们都需要使用舱位等级，而其又是有限的、可枚举的，另外此处宏定义各舱位总票数方便更改，故有以下内容

```cpp
#define STOCK_TOTAL_FIRST 50
#define STOCK_TOTAL_SECOND 100
#define STOCK_TOTAL_THIRD 200 

typedef enum
{
 FIRST,SECOND,THIRD
}travelClass;
```
---

以下将列出在用户操作界面的功能及实现方法。

- 查询（并入购票和改签界面，同时两部分相互独立）
  - 在进行查询时，用户将被要求输入航班的时间（具体到天）和始末地址。进而程序将所有符合条件的航班信息返回到界面上。
- 筛选
  - 点击“去除无票航班”，可以使界面中展示的所有航班信息中，去除无票的航班。
- 排序
  1. 根据出发时间排序（仅支持时间从早到晚的排序）
  2. 根据票价排序（仅支持价格从高到低的排序）
  3. 去除无票航班
- 购票、退票、改签
  - 购票：用户点击查询后，系统将会把存放到用户可选择的位置，如此用户只需根据查询得到的航班信息按航班号选择航班，同时需要附上舱位信息
  - 退票：用户购票完成后，系统将会将所有用户已购的航班信息展示在用户可见的位置（以表的形式），并在退票界面仅允许用户选择此中的航班，防止错误退票
  - 改签：同上所描述，改签时用户依然只能从展示的可供选择的航班中购买改签之后的航班，同样也只能从展示的已购航班中选择改签的航班
 
  在选择航班时间的时候，本系统支持两种输入时间的方法：
  1. 直接输入时间（如：2023-12-2）
~~2. 在日历小组件中选择日期~~
---
  本系统还支持登陆界面，用户信息检验只在登录时，因为本系统的定位只是课程设计作业（lazy）。用户信息只用简单的链表储存在程序中，但航班信息意义较大内容较多，故决定存储在文件中（data.bin）。

---
应老师的要求，重新修改了程序的部分内容：

1. 添加了管理员的功能，管理员可以对航班的信息进行修改
2. 为管理员系统重新设计了界面，同时提供更多可调用的对文件直接进行操作的函数，方便功能的实现
3. 重新设计了用户界面，使得用户界面更加符合直觉和使用逻辑
4. 添加多用户操作，对用户原先操作进行保存

同时由于原先并无对航班的直接修改，在航班余票为零时，默认此航班失效，在读取时，将此航班信息去除，以防用户错误操作。由于管理员系统的出现使得，修改航班必须有新的标准。

> 故在管理员系统中，若将航班信息删除，则默认将航班号修改为"000000"，同时用户取消航班时，默认将存储的订票信息中用户名修改为"NULL"。为了避免大量无意义信息的存储，在管理员界面中，添加清楚无意义缓存的功能。（即删除所有无用订票信息，同时删除所有无用航班信息）。